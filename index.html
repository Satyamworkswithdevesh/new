<script src="https://accounts.google.com/gsi/client" async defer></script>

<div id="g_id_onload"
     data-client_id="479416269619-2dq52k0r8qp0u1vaah89ecbc8gn3v9of.apps.googleusercontent.com"
     data-callback="handleCredentialResponse"
     data-auto_prompt="false">
</div>

<div class="g_id_signin" data-type="standard"></div>

<script>
  // Debug information
  console.log("Current page URL:", window.location.href);
  console.log("Current origin:", window.location.origin);
  console.log("Current protocol:", window.location.protocol);
  console.log("Current host:", window.location.host);

  async function handleCredentialResponse(response) {
    console.log("Google Sign-In successful!");
    const idToken = response.credential;

    // Send ID token to backend
    const res = await fetch("http://localhost:5000/auth/google/idtoken", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ idToken })
    });

    const data = await res.json();
    console.log("User info:", data);
  }

  // Add error handling for Google Sign-In
  window.onload = function() {
    console.log("Page loaded. Google Sign-In should initialize...");
  };
</script>
